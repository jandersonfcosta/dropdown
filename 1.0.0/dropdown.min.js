function dropdown(a){function d(d){return"block"===c.style.display?!1:(a.field=d,f(),h(),d.parentNode.appendChild(c),c.style.display="block",c.style.position="absolute",c.style.height=a.height,c.style.width="",a.width=a.width||(c.clientWidth<d.clientWidth?d.clientWidth:c.clientWidth+10),c.style.width=a.width,k(b,"mousedown",e),k(c,"mousedown",l),k(d,"mousedown",l),j(b,"mousedown",e),j(c,"mousedown",l),j(d,"mousedown",l),void(a.onshow&&a.onshow()))}function e(){c.style.display="none",k(b,"mousedown",e),k(c,"mousedown",l),k(a.field,"mousedown",l),a.onclose&&a.onclose(a.value)}function f(){a.readonly&&(a.field.readOnly=!0,a.field.blur())}function g(b){if("select"===a.type){var d=b.getAttribute("text"),f=b.getAttribute("value");a.field.value=d,a.value={value:f,text:d},e()}else{var g="",h=c.getElementsByTagName("input");a.value=[];for(var i=0;i<h.length;i++)if(h[i].checked){var d=h[i].parentNode.getAttribute("text"),f=h[i].parentNode.getAttribute("value");a.value.push({value:f,text:d}),g+=a.breakline?d+a.separator+"\n":d+a.separator+" "}a.field.value=g.substr(0,g.lastIndexOf(a.separator))}}function h(){if(c.innerHTML="","select"===a.type)var b=i(a.field.value);else var b=a.field.value.split(a.separator);for(var d in a.options){var e=a.options[d].value||a.options[d],f=a.options[d].text||a.options[d],h=document.createElement("label"),j=document.createElement("div");if(j.style.whiteSpace="nowrap",j.style.cursor="default",j.setAttributeNode(document.createAttribute("value")),j.setAttributeNode(document.createAttribute("text")),j.setAttribute("value",e),j.setAttribute("text",f),"select"===a.type)j.style.padding="3px",b===f&&(j.style.color="#fff",j.style.backgroundColor="#3879D9"),j.onclick=function(){g(this)};else{var k=document.createElement("input");k.type="checkbox",k.style.padding=0,k.style.margin=0,k.style.marginRight="5px",k.style.marginRight="5px",j.style.padding="3px",j.appendChild(k);for(var l in b)f.toLowerCase()==i(b[l]).toLowerCase()&&(k.checked=!0);j.onclick=function(){var a=window.event.srcElement.tagName.toLowerCase();if("input"!==a){var b=this.getElementsByTagName("input")[0];b.checked?b.checked=!1:b.checked=!0}g()}}j.onmouseover=function(){""===this.style.color&&(this.style.backgroundColor="#eee")},j.onmouseout=function(){""===this.style.color&&(this.style.backgroundColor="#fff")},h.innerHTML=f,j.appendChild(h),c.appendChild(j)}}function i(a){return a.replace(/^\s+|\s+$/gm,"")}function j(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent&&a.attachEvent("on"+b,c)}function k(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function l(a){if(!a)var a=window.event;a.cancelBubble=!0,a.returnValue=!1}var b=document.body.parentNode,c=document.getElementById("dropdown");return a.dropdown=c,a.type=a.type||"select",a.height=a.height||225,a.readonly=a.readonly||!0,a.breakline=a.breakline||!1,a.separator=a.separator||",",a.show=d,a}!function(){var a="9pt",b=document.createElement("div");b.id="dropdown",b.style.fontSize=a,b.style.fontFamily="sans-serif",b.style.display="none",b.style.backgroundColor="#fff",b.style.border="1px solid #ccc",b.style.overflowX="hidden",b.style.overflowY="auto",document.body.appendChild(b)}();